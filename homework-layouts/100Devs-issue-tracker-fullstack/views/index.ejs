<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>100Devs | Issue Tracker FullStack </title>

    <!-- CUSTOM CSS STYLES -->
    <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">

</head>

<body>
    <section class="container col-lg-6 py-4">
        <h1>Ticket Tracker FullStack Demo</h1>
        <section class="h-100 p-5 bg-dark border rounded-3 text-white">
            <h3>Add New Issue:</h3>
            <form id="issueInputForm" method="POST" action="/new">
                <div class="form-group">
                    <label for="subject">Subject</label>
                    <input type="text" class="form-control mb-3" id="subject" name="subject" placeholder="Issue Subject...">
                </div>
                <div class="form-group">
                    <label for="description">Description</label>
                    <input type="text" class="form-control mb-3" name="description" id="description" placeholder="Issue Description...">
                </div>
                <div class="form-group">
                    <label for="severity">Severity</label>
                    <select class="form-control mb-3" id="severity" name="severity">
                        <option value="Low">Low</option>
                        <option value="Medium">Medium</option>
                        <option value="High" selected>High</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="assignedTo">Assigned To</label>
                    <input type="text" class="form-control mb-3" id="assignedTo" name="assignedTo" placeholder="Enter Person Responsible...">
                </div>
                <div class="d-grid gap-2 d-md-block">
                    <button class="btn btn-warning" type="submit">Add</button>
                </div>
            </form>
        </section>
        <section class="row">
            <div class="col-lg-12 pt-4">
                <div id="issuesList">
                    <% ticketList.forEach(tickets => {%>
                        <div class="card card-body bg-dark text-white mb-3">
                            <h6>Issue Id: <%=tickets._id%></h6>
                            <p><span class="badge <%=tickets.status== 'Closed' ? 'badge rounded-pill bg-success' : 'badge rounded-pill bg-info text-dark'%>"><%=tickets.status%></span></p>
                            <h3><%=tickets.subject%></h3>
                            <p><%=tickets.description%></p>
                            <p><i class="bi bi-bug"></i><%=tickets.severity%><i class="bi bi-person"></i><%=tickets.assignedTo%></p>
                            <div class="d-grid gap-2 d-md-block">
                                <a href="/edit/<%=tickets._id%>" class="btn btn-warning">Close</a>
                                <a href="/edit/remove/<%=tickets._id%>" class="btn btn-danger">Delete</a>
                            </div>
                        </div>
                    <% })  %>
                </div>
            </div>
        </section>
    </section>
</body>